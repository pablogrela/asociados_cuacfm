<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:tiles="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
<title th:text="#{profile.title}"></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="shortcut icon" th:href="@{/resources/images/favicon.ico}" />
<!-- CSS -->
<link rel="stylesheet" th:href="@{/resources/css/bootstrap.min.css}" />
<link rel="stylesheet" th:href="@{/resources/css/core.css}" />
<!-- SCRIPT -->
<script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
<script th:src="@{/resources/js/bootstrap.min.js}"></script>
<script th:src="@{/resources/js/profile.js}"></script>
<script src="//cdn.jsdelivr.net/webshim/1.15.7/polyfiller.js"></script>
<script th:src="@{/resources/js/formcfg-es.js}"></script>
<script th:src="@{/resources/js/chargeWebshim.js}"></script>
</head>
<body>

	<!-- Generic Header -->
	<div th:replace="fragments/header :: header(active='profile')">&nbsp;</div>


	<!-- Button view Bank Accounts-->
	<div class="form-group text-center">
		<button type="button" class="btn btn-info btn-lg" th:text="#{account.viewBankAccounts}"
			th:title="#{account.infoBankAccounts}" onclick="showModal(modal)"></button>
	</div>
	
	<form class="form-narrow form-horizontal ws-validate" method="post" th:action="@{/profile}" th:object="${profileForm}">

		<!--/* Show general error message when form contains errors */-->
		<th:block th:if="${#fields.hasErrors('${profileForm.*}')}">
			<div th:replace="fragments/alert :: alert (type='danger', message=#{profile.error})">Alert</div>
		</th:block>


		<!-- /* Handle the flash message */-->
		<th:block th:if="${message != null}">
			<!-- /* The message code is returned from the @Controller */ -->
			<div
				th:replace="fragments/alert :: alert (type=${#strings.toLowerCase(message.type)}, message=#{${message.message}(${#authentication.name})})">&nbsp;</div>
		</th:block>

		<fieldset>

			<!-- Message help-->
			<legend th:text="#{profile.please}">Would you like to change any of the information?</legend>

			<!-- Edit Name, with a checkbox to enable field name -->
			<div class="form-group" th:classappend="${#fields.hasErrors('name')}? 'has-error'">
				<label for="name" class="col-lg-2 control-label" th:text="#{name}">Name</label>
				<div class="col-lg-10">
					<input type="text" name="name" class="form-control" id="name" th:placeholder="#{name}" th:field="*{name}"
						maxlength="30" required="required" />
					<span class="help-block" th:if="${#fields.hasErrors('name')}" th:errors="*{name}">Incorrect name</span>
					<div class="ws-errorbox" hidden=""></div>
				</div>
			</div>

			<!-- Edit NickName, with a checkbox to enable field nickName-->
			<div class="form-group" th:classappend="${#fields.hasErrors('nickName')}? 'has-error'">
				<label for="nickName" class="col-lg-2 control-label" th:text="#{nickName}">NickName</label>
				<div class="col-lg-10">
					<input type="text" name="nickName" class="form-control" id="nickName" th:placeholder="#{nickName}"
						th:field="*{nickName}" maxlength="30" />
					<span class="help-block" th:if="${#fields.hasErrors('nickName')}" th:errors="*{nickName}">Incorrect nickName</span>
					<div class="ws-errorbox" hidden=""></div>
				</div>
			</div>

			<!-- Edit dni, with a checkbox to enable field dni -->
			<div class="form-group" th:classappend="${#fields.hasErrors('dni')}? 'has-error'">
				<label for="dni" class="col-lg-2 control-label" th:text="#{dni}">dni</label>
				<div class="col-lg-10">
					<input type="text" name="dni" class="form-control" id="dni" th:placeholder="#{dni}" th:field="*{dni}"
						maxlength="30" required="required" />
					<span class="help-block" th:if="${#fields.hasErrors('dni')}" th:errors="*{dni}">Incorrect dni</span>
					<div class="ws-errorbox" hidden=""></div>
				</div>
			</div>


			<!-- Edit address, with a checkbox to enable field address -->
			<div class="form-group" th:classappend="${#fields.hasErrors('address')}? 'has-error'">
				<label for="address" class="col-lg-2 control-label" th:text="#{address}">address</label>
				<div class="col-lg-10">
					<input type="text" name="address" class="form-control" id="address" th:placeholder="#{address}"
						th:field="*{address}" maxlength="30" required="required" />
					<span class="help-block" th:if="${#fields.hasErrors('address')}" th:errors="*{address}">Incorrect address</span>
					<div class="ws-errorbox" hidden=""></div>
				</div>
			</div>


			<!-- Edit cp, with a checkbox to enable field cp -->
			<div class="form-group" th:classappend="${#fields.hasErrors('cp')}? 'has-error'">
				<label for="cp" class="col-lg-1 control-label" th:text="#{cp}">cp</label>
				<div class="col-lg-10">
					<input type="text" name="cp" class="form-control" id="cp" th:placeholder="#{cp}" th:field="*{cp}" maxlength="30"
						required="required" />
					<span class="help-block" th:if="${#fields.hasErrors('cp')}" th:errors="*{cp}">Incorrect cp</span>
					<div class="ws-errorbox" hidden=""></div>
				</div>
			</div>


			<!-- Edit province, with a checkbox to enable field province -->
			<div class="form-group" th:classappend="${#fields.hasErrors('province')}? 'has-error'">
				<label for="province" class="col-lg-2 control-label" th:text="#{province}">province</label>
				<div class="col-lg-10">
					<input type="text" name="province" class="form-control" id="province" th:placeholder="#{province}"
						th:field="*{province}" maxlength="30" required="required" />
					<span class="help-block" th:if="${#fields.hasErrors('province')}" th:errors="*{province}">Incorrect province</span>
					<div class="ws-errorbox" hidden=""></div>
				</div>
			</div>

			<!-- Edit codeCountry, with a checkbox to enable field codeCountry -->
			<div class="form-group" th:classappend="${#fields.hasErrors('codeCountry')}? 'has-error'">
				<label for="codeCountry" class="col-lg-1 control-label" th:text="#{codeCountry}">codeCountry</label>
				<div class="col-lg-10">
					<input type="text" name="codeCountry" class="form-control" id="codeCountry" th:placeholder="#{codeCountry}"
						th:field="*{codeCountry}" maxlength="2" required="required" />
					<span class="help-block" th:if="${#fields.hasErrors('codeCountry')}" th:errors="*{codeCountry}">Incorrect
						codeCountry</span>
					<div class="ws-errorbox" hidden=""></div>
				</div>
			</div>
			<!-- Edit Login, with a checkbox to enable field login-->
			<div class="form-group" th:classappend="${#fields.hasErrors('login')}? 'has-error'">
				<label for="login" class="col-lg-2 control-label" th:text="#{login}">Login</label>
				<div class="col-lg-10">
					<input type="text" name="login" disabled="disabled" class="form-control" id="login" th:placeholder="#{login}"
						th:field="*{login}" maxlength="30" required="required" />
					<input type="checkbox" id="enableModify4" th:text="#{profile}" name="onLogin" onChange="checkedLogin(this.form)" />
					<span class="help-block" th:if="${#fields.hasErrors('login')}" th:errors="*{login}">Incorrect login</span>
					<div class="ws-errorbox" hidden=""></div>
				</div>
			</div>


			<!-- Edit Email, with a checkbox to enable field email -->
			<div class="form-group" th:classappend="${#fields.hasErrors('email')}? 'has-error'">
				<label for="email" class="col-lg-2 control-label" th:text="#{email}">Email</label>
				<div class="col-lg-10">
					<input type="text" name="email" disabled="disabled" class="form-control" id="email" th:placeholder="#{email}"
						th:field="*{email}" maxlength="30" required="required" />
					<input type="checkbox" id="enableModify5" th:text="#{profile}" name="onEmail" onChange="checkedEmail(this.form)" />
					<span class="help-block" th:if="${#fields.hasErrors('email')}" th:errors="*{email}">Incorrect email</span>
					<div class="ws-errorbox" hidden=""></div>
				</div>
			</div>


			<!-- Edit phone, with a checkbox to enable field phone -->
			<div class="form-group" th:classappend="${#fields.hasErrors('phone')}? 'has-error'">
				<label for="phone" class="col-lg-2 control-label" th:text="#{phone}">phone</label>
				<div class="col-lg-10">
					<input type="tel" name="phone" class="form-control" id="phone" th:placeholder="#{phone}" th:field="*{phone}"
						minlength="6" maxlength="20" pattern="[0-9]{6,20}" th:title="#{telPattern}" value="" />
					<span class="help-block" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}">Incorrect phone</span>
					<div class="ws-errorbox" hidden=""></div>
				</div>
			</div>

			<!-- Edit mobile, with a checkbox to enable field mobile -->
			<div class="form-group" th:classappend="${#fields.hasErrors('mobile')}? 'has-error'">
				<label for="tel" class="col-lg-2 control-label" th:text="#{mobile}">mobile</label>
				<div class="col-lg-10">
					<input type="tel" name="mobile" class="form-control" id="mobile" th:placeholder="#{mobile}" th:field="*{mobile}"
						minlength="6" maxlength="20" pattern="[0-9]{6,20}" th:title="#{telPattern}" required="required" />
					<span class="help-block" th:if="${#fields.hasErrors('mobile')}" th:errors="*{mobile}">Incorrect mobile</span>
					<div class="ws-errorbox" hidden=""></div>
				</div>
			</div>

			<!-- Edit ProgramName -->
			<div class="form-group" th:classappend="${#fields.hasErrors('programName')}? 'has-error'">
				<label for="programName" class="col-lg-1 control-label" th:text="#{programName}">programName</label>
				<div class="col-lg-10">
					<input type="text" class="form-control" id="programName" th:placeholder="#{programName}" th:field="*{programName}"
						maxlength="30" th:title="#{infoProgramName}" />
					<span class="help-block" th:if="${#fields.hasErrors('programName')}" th:errors="*{programName}">Incorrect
						programName</span>
					<div class="ws-errorbox" hidden=""></div>
				</div>
			</div>

			<!-- Edit student, with a checkbox to enable field student -->
			<div class="form-group">
				<label for="student" class="col-lg-2 control-label" th:text="#{student}">student</label>
				<div class="col-lg-15">
					<input type="checkbox" name="student" id="student" th:title="#{signup.infoStudent}" />
				</div>
			</div>


			<!-- Edit dateBirth, with a checkbox to enable field dateBirth -->
			<div class="form-inline form-group" th:classappend="${#fields.hasErrors('dateBirth')}? 'has-error'">
				<label for="dateBirth" class="col-lg-1 control-label" th:text="#{dateBirth}">dateBirth</label>
				<div class="col-lg-10">
					<input type="date" name="dateBirth" class="form-control" id="dateBirth" th:placeholder="#{account.dateBirth}"
						th:field="*{dateBirth}" />
					<br></br>
					<span class="help-block" th:if="${#fields.hasErrors('dateBirth')}" th:errors="*{dateBirth}">Incorrect
						dateBirth</span>
					<div class="ws-errorbox" hidden=""></div>
				</div>
			</div>

			<!-- Edit Password, with a checkbox to enable field password and rePassword-->
			<div class="form-group" th:classappend="${#fields.hasErrors('password')}? 'has-error'">
				<label for="password" class="col-lg-2 control-label" th:text="#{password}">Password</label>
				<div class="col-lg-10">
					<input type="password" name="password" disabled="disabled" class="form-control" id="password"
						th:placeholder="#{password}" th:field="*{password}" minlength="4" maxlength="20" required="required" />
					<input type="checkbox" id="enablePasswords" th:text="#{profile}" name="onPassword"
						onChange="checkedPassword(this.form)" />
					<span class="help-block" th:if="${#fields.hasErrors('password')}" th:errors="*{password}">Incorrect password</span>
					<div class="ws-errorbox" hidden=""></div>
				</div>
			</div>


			<!-- Reinsert Password -->
			<div id="visibleRePasswords" style="display: none;">
				<div class="form-group" th:classappend="${#fields.hasErrors('rePassword')}? 'has-error'">
					<label for="rePassword" class="col-lg-1 control-label" th:text="#{rePassword}">rePassword</label>
					<div class="col-lg-10">
						<input type="password" name="rePassword" disabled="disabled" class="form-control" id="rePassword"
							th:placeholder="#{rePassword}" th:field="*{rePassword}" minlength="4" data-dependent-validation="password"
							maxlength="20" required="required" />
						<span class="help-block" th:if="${#fields.hasErrors('rePassword')}" th:errors="*{rePassword}">Incorrect
							password</span>
						<div class="ws-errorbox" hidden=""></div>
					</div>
				</div>
			</div>

			<!-- Account Type, Selected option in droplist, with a checkbox to enable field account Type -->
			<div class="form-group">
				<label for="accountType" class="col-lg-1 control-label" th:text="#{accountType}">accountType</label>
				<div class="col-lg-4">
					<select disabled="disabled" class="form-control" id="accountType" name="accountTypeId" th:field="*{accountTypeId}">
						<option th:field="*{accountTypeId}" th:each="accountType : ${profileForm.accountTypes}"
							th:value="${accountType.id}" th:text="${accountType.name}">accountType</option>
					</select>
				</div>
			</div>


			<!-- Method Payment, Selected option in droplist, with a checkbox to enable field method payment -->
			<div class="form-group">
				<label for="methodPayment" class="col-lg-1 control-label" th:text="#{methodPayment}">methodPayment</label>
				<div class="col-lg-4">
					<select disabled="disabled" class="form-control" id="methodPayment" name="roleId" th:field="*{methodPaymentId}">
						<option th:field="*{methodPaymentId}" th:each="methodPayment : ${profileForm.methodPayments}"
							th:value="${methodPayment.id}" th:text="${methodPayment.name}">methodPayment</option>
					</select>
				</div>
			</div>


			<!-- Edit Installments, with a checkbox to enable field installments -->
			<div class="form-group" th:classappend="${#fields.hasErrors('installments')}? 'has-error'">
				<label for="installments" class="col-lg-1 control-label" th:text="#{installmentsInscription}">installments</label>
				<div class="col-lg-10">
					<div class="col-lg-3-edit">
						<input type="number" name="installments" disabled="disabled" class="form-control" id="installments"
							th:placeholder="#{installments}" th:field="*{installments}" min="1" max="12" required="required" />
					</div>
					<br></br> <br></br>
					<span class="col-lg-10-edit help-block" th:if="${#fields.hasErrors('installments')}" th:errors="*{installments}">Incorrect
						installments</span>
					<div class="ws-errorbox" hidden=""></div>
				</div>
			</div>

			<!-- Button Modify, visible if a checkbox enable is pressed -->
			<div id="visibleModify">
				<div class="form-group">
					<div class="col-lg-offset-2 col-lg-10">
						<button type="submit" class="btn btn-success btn-lg" th:text="#{edit}">Sign Up</button>
					</div>
				</div>
			</div>

		</fieldset>
	</form>
	
	<!-- Modal Info 	-->
	<div id="modal" class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content panel-info">
				<div class="modal-header modal-header-info">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<h4 class="modal-title" th:text="#{account.infoBankAccounts}">Confirmation</h4>
				</div>
				<div class="modal-body">
					<ul th:each="bankAccount : ${bankAccounts}">
						<th:block th:if="${bankAccount.active}">
							<h3 th:text="#{account.activeBankAccount}" style="color: blue">bank</h3>
						</th:block>
						<th:block th:if="!${bankAccount.active}">
							<h3 th:text="#{account.infoBankAccount}" style="color: red">bank</h3>
						</th:block>
						<li th:text="${bankAccount.bank}">bank</li>
						<li th:text="${bankAccount.bic}">bic</li>
						<li th:text="${bankAccount.iban}">iban</li>
						<li th:text="${bankAccount.mandate}">mandate</li>
					</ul>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-info" th:text="#{accept}" data-dismiss="modal">Accept</button>
				</div>
			</div>
		</div>
	</div>
</body>
</html>